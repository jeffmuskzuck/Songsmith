<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI Songsmith</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <main class="container">
    <h1>AI Songsmith</h1>

    <section class="controls" style="margin-bottom:12px; display:flex; gap:12px; flex-wrap:wrap; align-items:center;">
      <label>Volume
        <input id="vol" type="range" min="0" max="100" value="20" />
      </label>
      <label>Instrument
        <select id="instrument">
          <option value="sine">Sine</option>
          <option value="triangle">Triangle</option>
          <option value="sawtooth">Sawtooth</option>
        </select>
      </label>
      <label>Voice Rate
        <input id="voiceRate" type="range" min="50" max="200" value="100" />
      </label>
      <label>Voice Pitch
        <input id="voicePitch" type="range" min="50" max="200" value="100" />
      </label>
      <label>
        <input id="withBacking" type="checkbox" checked /> Backing
      </label>
    </section>

    <form id="song-form">
      <div class="field">
        <label for="genre">Genre</label>
        <select id="genre" name="genre" required>
          <option value="pop">Pop</option>
          <option value="rock">Rock</option>
          <option value="hiphop">Hip Hop</option>
          <option value="jazz">Jazz</option>
          <option value="country">Country</option>
        </select>
      </div>
      <div class="field">
        <label for="duration">Duration</label>
        <input id="duration" name="duration" type="text" placeholder="e.g. 2:30" required />
      </div>
      <div class="field">
        <label for="prompt">Lyrics theme</label>
        <textarea id="prompt" name="prompt" rows="3" placeholder="What should the lyrics be about?"></textarea>
      </div>
      <div class="field">
        <label for="count">How many suggestions?</label>
        <input id="count" name="count" type="number" value="5" min="1" max="10" />
      </div>
      <button type="submit">Generate Songs</button>
    </form>

    <section id="results" class="results" aria-live="polite"></section>
    <div class="actions">
      <button id="more" type="button" disabled>More suggestions</button>
    </div>
  </main>

  <script src="audio.js"></script>
  <script>
    // initialize audio options from controls on first load
    window.addEventListener('DOMContentLoaded', () => {
      const vol = document.getElementById('vol');
      const instrument = document.getElementById('instrument');
      const voiceRate = document.getElementById('voiceRate');
      const voicePitch = document.getElementById('voicePitch');
      const withBacking = document.getElementById('withBacking');
      if (window.setAudioOptions) {
        window.setAudioOptions({
          volume: Number((vol?.value||20)) / 100,
          instrument: instrument?.value || 'sine',
          voiceRate: Number((voiceRate?.value||100)) / 100,
          voicePitch: Number((voicePitch?.value||100)) / 100,
        });
      }
      function update() {
        window.setAudioOptions?.({
          volume: Number(vol.value) / 100,
          instrument: instrument.value,
          voiceRate: Number(voiceRate.value) / 100,
          voicePitch: Number(voicePitch.value) / 100,
        });
      }
      vol?.addEventListener('input', update);
      instrument?.addEventListener('change', update);
      voiceRate?.addEventListener('input', update);
      voicePitch?.addEventListener('input', update);
      withBacking?.addEventListener('change', () => {});
      window.__withBacking = () => !!withBacking?.checked;
    });
  </script>
  <script src="app.js"></script>
</body>
</html>
